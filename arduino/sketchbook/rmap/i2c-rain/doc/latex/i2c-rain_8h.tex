\hypertarget{i2c-rain_8h}{}\section{i2c-\/rain.h File Reference}
\label{i2c-rain_8h}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}}
{\ttfamily \#include \char`\"{}i2c-\/rain-\/config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$debug.\+h$>$}\newline
{\ttfamily \#include $<$hardware\+\_\+config.\+h$>$}\newline
{\ttfamily \#include $<$avr/sleep.\+h$>$}\newline
{\ttfamily \#include $<$avr/power.\+h$>$}\newline
{\ttfamily \#include $<$avr/wdt.\+h$>$}\newline
{\ttfamily \#include $<$i2c\+\_\+utility.\+h$>$}\newline
{\ttfamily \#include $<$rmap\+\_\+utility.\+h$>$}\newline
{\ttfamily \#include $<$eeprom\+\_\+utility.\+h$>$}\newline
{\ttfamily \#include $<$Wire.\+h$>$}\newline
{\ttfamily \#include $<$Time.\+h$>$}\newline
{\ttfamily \#include $<$typedef.\+h$>$}\newline
{\ttfamily \#include $<$registers-\/rain.\+h$>$}\newline
Include dependency graph for i2c-\/rain.h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{i2c-rain_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=144pt]{i2c-rain_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structconfiguration__t}{configuration\+\_\+t}
\begin{DoxyCompactList}\small\item\em E\+E\+P\+R\+OM saved configuration. \end{DoxyCompactList}\item 
struct \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t}
\begin{DoxyCompactList}\small\item\em Readable data through i2c bus. \end{DoxyCompactList}\item 
struct \hyperlink{structwritable__data__t}{writable\+\_\+data\+\_\+t}
\begin{DoxyCompactList}\small\item\em Writable data through i2c bus. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248}{state\+\_\+t} \{ \hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a0cb1b2c6a7db1f1084886c98909a3f36}{I\+N\+IT}, 
\hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a34f1df650a5075369a6827770c433a91}{T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON}, 
\hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248adc6f24fd6915a3f2786a1b7045406924}{E\+ND}
 \}\begin{DoxyCompactList}\small\item\em Main loop finite state machine. \end{DoxyCompactList}
\item 
enum \hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205ba}{tipping\+\_\+bucket\+\_\+state\+\_\+t} \{ \hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa0b7c7807059f943bc642578373d65287}{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT}, 
\hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa292adccffc71f51ae82f4e219a03e341}{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD}, 
\hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa27bb1d47c1289d872321404357c8d2e7}{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND}, 
\hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa563187c281a3c4faf3684472339c78c1}{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE}
 \}\begin{DoxyCompactList}\small\item\em Tipping bucket task finite state machine. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{i2c-rain_8h_afb98a0f07c30784284f48271ffe02b97}{init\+\_\+power\+\_\+down} (uint32\+\_\+t $\ast$time\+\_\+ms, uint32\+\_\+t debouncing\+\_\+ms)
\begin{DoxyCompactList}\small\item\em Enter power down mode. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a980e73df66b14b1190bc25da430a4f12}{init\+\_\+wdt} (uint8\+\_\+t wdt\+\_\+timer)
\begin{DoxyCompactList}\small\item\em Init watchdog. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a348d23d5899ce59d18975284dfb0afc0}{init\+\_\+system} (void)
\begin{DoxyCompactList}\small\item\em Init system. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_ad438327c9cf783bd9c519ce8b8ef3bfa}{init\+\_\+buffers} (void)
\begin{DoxyCompactList}\small\item\em Init buffers. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a2aae2290a141fddcea3fb6009acbb445}{init\+\_\+tasks} (void)
\begin{DoxyCompactList}\small\item\em Init tasks variable and state. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_aa9c113540346b54d49b2a596e6ba8480}{init\+\_\+pins} (void)
\begin{DoxyCompactList}\small\item\em Init hardware pins. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a7c21452937863fa02a29654247eef09b}{init\+\_\+wire} (void)
\begin{DoxyCompactList}\small\item\em Init wire (i2c) library and performs checks on the bus. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a4454f968b2402a0e61deb15ab2571dab}{init\+\_\+spi} (void)
\begin{DoxyCompactList}\small\item\em Init S\+PI library. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a88533ad02465ce52d4e6de7b2095ec32}{init\+\_\+rtc} (void)
\begin{DoxyCompactList}\small\item\em Init R\+TC module. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_ad7577ba7f06f417a019b69da8682ede5}{init\+\_\+sensors} (void)
\begin{DoxyCompactList}\small\item\em Create and setup sensors. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_ab08b9047f47849f399950705e769be2e}{print\+\_\+configuration} (void)
\begin{DoxyCompactList}\small\item\em Print current configuration. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a1be652e7d942160a14a560e0be837358}{load\+\_\+configuration} (void)
\begin{DoxyCompactList}\small\item\em Load configuration from E\+E\+P\+R\+OM. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a8801fa7c9f323c5b8b9b2bb5b1c438ff}{save\+\_\+configuration} (bool)
\begin{DoxyCompactList}\small\item\em Save configuration to E\+E\+P\+R\+OM. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_aaad2f6556489c51f2c24302e2cb4188a}{commands} (void)
\begin{DoxyCompactList}\small\item\em Performs specific operations based on the received command. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a717429168fb5542a7b36a94712f7c67e}{reset\+\_\+buffers} (void)
\begin{DoxyCompactList}\small\item\em Reset buffers to default value. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_aafa3d59a1bde3085849eee08f110612f}{exchange\+\_\+buffers} (void)
\begin{DoxyCompactList}\small\item\em Exchange reader and writer pointer to buffer. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a8fcd3e091d63c9caff82b8bc3398c279}{tipping\+\_\+bucket\+\_\+task} (void)
\begin{DoxyCompactList}\small\item\em Tipping bucket task. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a9f32a4169471a435e9364460d7b1761d}{command\+\_\+task} (void)
\begin{DoxyCompactList}\small\item\em Execute the command received on i2c bus by reading i2c received data buffer. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_ac1da31566bf05976ecb87372278a1ea8}{i2c\+\_\+request\+\_\+interrupt\+\_\+handler} (void)
\begin{DoxyCompactList}\small\item\em I2C request interrupt handler. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a7f81fcf39717baf18f2e7c2eee2051ae}{i2c\+\_\+receive\+\_\+interrupt\+\_\+handler} (void)
\begin{DoxyCompactList}\small\item\em I2C receive interrupt handler. \end{DoxyCompactList}\item 
void \hyperlink{i2c-rain_8h_a7fcfeb4fd75663ddccc79030c37d68b9}{tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler} (void)
\begin{DoxyCompactList}\small\item\em Tipping bucket interrupt handler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{i2c-rain_8h_a32c97d3f8cd6089ccf54e7c423020b7a}\label{i2c-rain_8h_a32c97d3f8cd6089ccf54e7c423020b7a}} 
\hyperlink{structconfiguration__t}{configuration\+\_\+t} \hyperlink{i2c-rain_8h_a32c97d3f8cd6089ccf54e7c423020b7a}{configuration}
\begin{DoxyCompactList}\small\item\em Configuration data. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ab7c4666cc43ac73859ace91030494dba}\label{i2c-rain_8h_ab7c4666cc43ac73859ace91030494dba}} 
volatile \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t} \hyperlink{i2c-rain_8h_ab7c4666cc43ac73859ace91030494dba}{readable\+\_\+data\+\_\+1}
\begin{DoxyCompactList}\small\item\em First readable i2c register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_af1fd929e13557159958a5328deefd8a3}\label{i2c-rain_8h_af1fd929e13557159958a5328deefd8a3}} 
volatile \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t} \hyperlink{i2c-rain_8h_af1fd929e13557159958a5328deefd8a3}{readable\+\_\+data\+\_\+2}
\begin{DoxyCompactList}\small\item\em Second readable i2c register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_af0914001a8977841586be8312dee3656}\label{i2c-rain_8h_af0914001a8977841586be8312dee3656}} 
volatile \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t} $\ast$ \hyperlink{i2c-rain_8h_af0914001a8977841586be8312dee3656}{readable\+\_\+data\+\_\+read\+\_\+ptr}
\begin{DoxyCompactList}\small\item\em Pointer for read data in i2c readable register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ab7eec4069b1ac3d682d74b37921e2707}\label{i2c-rain_8h_ab7eec4069b1ac3d682d74b37921e2707}} 
volatile \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t} $\ast$ \hyperlink{i2c-rain_8h_ab7eec4069b1ac3d682d74b37921e2707}{readable\+\_\+data\+\_\+write\+\_\+ptr}
\begin{DoxyCompactList}\small\item\em Pointer for write data in i2c readable register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ae8dc647e7272fabb6881c64f98b47a01}\label{i2c-rain_8h_ae8dc647e7272fabb6881c64f98b47a01}} 
volatile \hyperlink{structreadable__data__t}{readable\+\_\+data\+\_\+t} $\ast$ \hyperlink{i2c-rain_8h_ae8dc647e7272fabb6881c64f98b47a01}{readable\+\_\+data\+\_\+temp\+\_\+ptr}
\begin{DoxyCompactList}\small\item\em Temporary pointer for exchange read and write pointer for i2c readable register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a4ebae70bf7be3eb353c52c5b4104fca9}\label{i2c-rain_8h_a4ebae70bf7be3eb353c52c5b4104fca9}} 
\hyperlink{structwritable__data__t}{writable\+\_\+data\+\_\+t} \hyperlink{i2c-rain_8h_a4ebae70bf7be3eb353c52c5b4104fca9}{writable\+\_\+data}
\begin{DoxyCompactList}\small\item\em Writable i2c register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a69435b30022db229f79c9a67574008ec}\label{i2c-rain_8h_a69435b30022db229f79c9a67574008ec}} 
\hyperlink{structwritable__data__t}{writable\+\_\+data\+\_\+t} $\ast$ \hyperlink{i2c-rain_8h_a69435b30022db229f79c9a67574008ec}{writable\+\_\+data\+\_\+ptr}
\begin{DoxyCompactList}\small\item\em Pointer for read and write data in i2c writable register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ae75498e0d428e94dd8895abec0af11ca}\label{i2c-rain_8h_ae75498e0d428e94dd8895abec0af11ca}} 
volatile uint8\+\_\+t \hyperlink{i2c-rain_8h_ae75498e0d428e94dd8895abec0af11ca}{readable\+\_\+data\+\_\+address}
\begin{DoxyCompactList}\small\item\em Address of readable i2c register. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a202892f30149022049fb90b5db0ddbfa}\label{i2c-rain_8h_a202892f30149022049fb90b5db0ddbfa}} 
volatile uint8\+\_\+t \hyperlink{i2c-rain_8h_a202892f30149022049fb90b5db0ddbfa}{readable\+\_\+data\+\_\+length}
\begin{DoxyCompactList}\small\item\em Number of bytes to read at readable\+\_\+data\+\_\+address. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ae22f16db01d254c3709565e8347c05af}\label{i2c-rain_8h_ae22f16db01d254c3709565e8347c05af}} 
volatile uint8\+\_\+t \hyperlink{i2c-rain_8h_ae22f16db01d254c3709565e8347c05af}{i2c\+\_\+rx\+\_\+data} \mbox{[}I2\+C\+\_\+\+M\+A\+X\+\_\+\+D\+A\+T\+A\+\_\+\+L\+E\+N\+G\+TH\mbox{]}
\begin{DoxyCompactList}\small\item\em Buffer for i2c received data. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ad51737114d6776c16525958973815d50}\label{i2c-rain_8h_ad51737114d6776c16525958973815d50}} 
volatile uint8\+\_\+t \hyperlink{i2c-rain_8h_ad51737114d6776c16525958973815d50}{ready\+\_\+tasks\+\_\+count}
\begin{DoxyCompactList}\small\item\em Number of tasks ready to execute. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a82dc7d1671e2febacdbd9a3c3a3283cd}\label{i2c-rain_8h_a82dc7d1671e2febacdbd9a3c3a3283cd}} 
uint32\+\_\+t \hyperlink{i2c-rain_8h_a82dc7d1671e2febacdbd9a3c3a3283cd}{awakened\+\_\+event\+\_\+occurred\+\_\+time\+\_\+ms}
\begin{DoxyCompactList}\small\item\em System time (in millisecond) when the system has awakened from power down. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a2a9792771d5af0df80ed2adf7c5dc0cf}\label{i2c-rain_8h_a2a9792771d5af0df80ed2adf7c5dc0cf}} 
bool \hyperlink{i2c-rain_8h_a2a9792771d5af0df80ed2adf7c5dc0cf}{is\+\_\+start}
\begin{DoxyCompactList}\small\item\em Execute start command. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ad2dc9b34342f31d98c692c9b5ff3c5a9}\label{i2c-rain_8h_ad2dc9b34342f31d98c692c9b5ff3c5a9}} 
bool \hyperlink{i2c-rain_8h_ad2dc9b34342f31d98c692c9b5ff3c5a9}{is\+\_\+stop}
\begin{DoxyCompactList}\small\item\em Execute stop command. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a6090a983e62d9556906716dd85f78d9d}\label{i2c-rain_8h_a6090a983e62d9556906716dd85f78d9d}} 
bool \hyperlink{i2c-rain_8h_a6090a983e62d9556906716dd85f78d9d}{is\+\_\+oneshot}
\begin{DoxyCompactList}\small\item\em Received command is in oneshot mode. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a75ef189b6b17aa09010c574ed6b01fc3}\label{i2c-rain_8h_a75ef189b6b17aa09010c574ed6b01fc3}} 
bool \hyperlink{i2c-rain_8h_a75ef189b6b17aa09010c574ed6b01fc3}{is\+\_\+continuous}
\begin{DoxyCompactList}\small\item\em Received command is in continuous mode. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_aa0097a28d3e4da7c88e72228e9b236d2}\label{i2c-rain_8h_aa0097a28d3e4da7c88e72228e9b236d2}} 
volatile uint32\+\_\+t \hyperlink{i2c-rain_8h_aa0097a28d3e4da7c88e72228e9b236d2}{rain\+\_\+tips\+\_\+event\+\_\+occurred\+\_\+time\+\_\+ms}
\begin{DoxyCompactList}\small\item\em System time (in millisecond) when rain tips occured. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a5688d7d07e5d53ec6ccd7acce49a728c}\label{i2c-rain_8h_a5688d7d07e5d53ec6ccd7acce49a728c}} 
rain\+\_\+t \hyperlink{i2c-rain_8h_a5688d7d07e5d53ec6ccd7acce49a728c}{rain}
\begin{DoxyCompactList}\small\item\em Rain data. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_adc6e5733fc3c22f0a7b2914188c49c90}\label{i2c-rain_8h_adc6e5733fc3c22f0a7b2914188c49c90}} 
\hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248}{state\+\_\+t} \hyperlink{i2c-rain_8h_adc6e5733fc3c22f0a7b2914188c49c90}{state}
\begin{DoxyCompactList}\small\item\em Current main loop state. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_ad17df11ab3931697018251d1e0e49d4a}\label{i2c-rain_8h_ad17df11ab3931697018251d1e0e49d4a}} 
\hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205ba}{tipping\+\_\+bucket\+\_\+state\+\_\+t} \hyperlink{i2c-rain_8h_ad17df11ab3931697018251d1e0e49d4a}{tipping\+\_\+bucket\+\_\+state}
\begin{DoxyCompactList}\small\item\em Current tipping bucket task state. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a28d699d6f58eb0ef202537500dfbd464}\label{i2c-rain_8h_a28d699d6f58eb0ef202537500dfbd464}} 
volatile bool \hyperlink{i2c-rain_8h_a28d699d6f58eb0ef202537500dfbd464}{is\+\_\+event\+\_\+tipping\+\_\+bucket}
\begin{DoxyCompactList}\small\item\em Enable or disable the Tipping Bucket task. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c-rain_8h_a12ae2319a01786793345e264f29368a4}\label{i2c-rain_8h_a12ae2319a01786793345e264f29368a4}} 
volatile bool \hyperlink{i2c-rain_8h_a12ae2319a01786793345e264f29368a4}{is\+\_\+event\+\_\+command\+\_\+task}
\begin{DoxyCompactList}\small\item\em Enable or disable the Command task. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248}\label{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!state\+\_\+t@{state\+\_\+t}}
\index{state\+\_\+t@{state\+\_\+t}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{state\+\_\+t}{state\_t}}
{\footnotesize\ttfamily enum \hyperlink{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248}{state\+\_\+t}}



Main loop finite state machine. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{I\+N\+IT@{I\+N\+IT}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!I\+N\+IT@{I\+N\+IT}}}\mbox{\Hypertarget{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a0cb1b2c6a7db1f1084886c98909a3f36}\label{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a0cb1b2c6a7db1f1084886c98909a3f36}} 
I\+N\+IT&init tasks and sensors \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON@{T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON@{T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON}}}\mbox{\Hypertarget{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a34f1df650a5075369a6827770c433a91}\label{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248a34f1df650a5075369a6827770c433a91}} 
T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON&execute active tasks \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{E\+ND@{E\+ND}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!E\+ND@{E\+ND}}}\mbox{\Hypertarget{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248adc6f24fd6915a3f2786a1b7045406924}\label{i2c-rain_8h_aa0aafed44fec19806d8f9ad834be1248adc6f24fd6915a3f2786a1b7045406924}} 
E\+ND&go to E\+N\+T\+E\+R\+\_\+\+P\+O\+W\+E\+R\+\_\+\+D\+O\+WN or T\+A\+S\+K\+S\+\_\+\+E\+X\+E\+C\+U\+T\+I\+ON \\
\hline

\end{DoxyEnumFields}
\mbox{\Hypertarget{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205ba}\label{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205ba}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!tipping\+\_\+bucket\+\_\+state\+\_\+t@{tipping\+\_\+bucket\+\_\+state\+\_\+t}}
\index{tipping\+\_\+bucket\+\_\+state\+\_\+t@{tipping\+\_\+bucket\+\_\+state\+\_\+t}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{tipping\+\_\+bucket\+\_\+state\+\_\+t}{tipping\_bucket\_state\_t}}
{\footnotesize\ttfamily enum \hyperlink{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205ba}{tipping\+\_\+bucket\+\_\+state\+\_\+t}}



Tipping bucket task finite state machine. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT}}}\mbox{\Hypertarget{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa0b7c7807059f943bc642578373d65287}\label{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa0b7c7807059f943bc642578373d65287}} 
T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+I\+N\+IT&init task variables \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD}}}\mbox{\Hypertarget{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa292adccffc71f51ae82f4e219a03e341}\label{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa292adccffc71f51ae82f4e219a03e341}} 
T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+R\+E\+AD&read rain tips from variable shared with tipping bucket interrupt \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND}}}\mbox{\Hypertarget{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa27bb1d47c1289d872321404357c8d2e7}\label{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa27bb1d47c1289d872321404357c8d2e7}} 
T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+E\+ND&performs end operations and deactivate task \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE@{T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE}}}\mbox{\Hypertarget{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa563187c281a3c4faf3684472339c78c1}\label{i2c-rain_8h_a7935f2f599e6a870190d4ae0a86205baa563187c281a3c4faf3684472339c78c1}} 
T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+A\+I\+T\+\_\+\+S\+T\+A\+TE&non-\/blocking waiting time \\
\hline

\end{DoxyEnumFields}


\subsection{Function Documentation}
\mbox{\Hypertarget{i2c-rain_8h_a9f32a4169471a435e9364460d7b1761d}\label{i2c-rain_8h_a9f32a4169471a435e9364460d7b1761d}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!command\+\_\+task@{command\+\_\+task}}
\index{command\+\_\+task@{command\+\_\+task}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{command\+\_\+task()}{command\_task()}}
{\footnotesize\ttfamily void command\+\_\+task (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Execute the command received on i2c bus by reading i2c received data buffer. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_aaad2f6556489c51f2c24302e2cb4188a}\label{i2c-rain_8h_aaad2f6556489c51f2c24302e2cb4188a}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!commands@{commands}}
\index{commands@{commands}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{commands()}{commands()}}
{\footnotesize\ttfamily void commands (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Performs specific operations based on the received command. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_aafa3d59a1bde3085849eee08f110612f}\label{i2c-rain_8h_aafa3d59a1bde3085849eee08f110612f}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!exchange\+\_\+buffers@{exchange\+\_\+buffers}}
\index{exchange\+\_\+buffers@{exchange\+\_\+buffers}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{exchange\+\_\+buffers()}{exchange\_buffers()}}
{\footnotesize\ttfamily void exchange\+\_\+buffers (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Exchange reader and writer pointer to buffer. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a7f81fcf39717baf18f2e7c2eee2051ae}\label{i2c-rain_8h_a7f81fcf39717baf18f2e7c2eee2051ae}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!i2c\+\_\+receive\+\_\+interrupt\+\_\+handler@{i2c\+\_\+receive\+\_\+interrupt\+\_\+handler}}
\index{i2c\+\_\+receive\+\_\+interrupt\+\_\+handler@{i2c\+\_\+receive\+\_\+interrupt\+\_\+handler}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{i2c\+\_\+receive\+\_\+interrupt\+\_\+handler()}{i2c\_receive\_interrupt\_handler()}}
{\footnotesize\ttfamily void i2c\+\_\+receive\+\_\+interrupt\+\_\+handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



I2C receive interrupt handler. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_ac1da31566bf05976ecb87372278a1ea8}\label{i2c-rain_8h_ac1da31566bf05976ecb87372278a1ea8}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!i2c\+\_\+request\+\_\+interrupt\+\_\+handler@{i2c\+\_\+request\+\_\+interrupt\+\_\+handler}}
\index{i2c\+\_\+request\+\_\+interrupt\+\_\+handler@{i2c\+\_\+request\+\_\+interrupt\+\_\+handler}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{i2c\+\_\+request\+\_\+interrupt\+\_\+handler()}{i2c\_request\_interrupt\_handler()}}
{\footnotesize\ttfamily void i2c\+\_\+request\+\_\+interrupt\+\_\+handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



I2C request interrupt handler. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
write readable\+\_\+data\+\_\+length bytes of data stored in readable\+\_\+data\+\_\+read\+\_\+ptr (base) + readable\+\_\+data\+\_\+address (offset) on i2c bus \mbox{\Hypertarget{i2c-rain_8h_ad438327c9cf783bd9c519ce8b8ef3bfa}\label{i2c-rain_8h_ad438327c9cf783bd9c519ce8b8ef3bfa}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+buffers@{init\+\_\+buffers}}
\index{init\+\_\+buffers@{init\+\_\+buffers}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+buffers()}{init\_buffers()}}
{\footnotesize\ttfamily void init\+\_\+buffers (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init buffers. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
copy readable\+\_\+data\+\_\+2 in readable\+\_\+data\+\_\+1 \mbox{\Hypertarget{i2c-rain_8h_aa9c113540346b54d49b2a596e6ba8480}\label{i2c-rain_8h_aa9c113540346b54d49b2a596e6ba8480}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+pins@{init\+\_\+pins}}
\index{init\+\_\+pins@{init\+\_\+pins}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+pins()}{init\_pins()}}
{\footnotesize\ttfamily void init\+\_\+pins (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init hardware pins. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_afb98a0f07c30784284f48271ffe02b97}\label{i2c-rain_8h_afb98a0f07c30784284f48271ffe02b97}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+power\+\_\+down@{init\+\_\+power\+\_\+down}}
\index{init\+\_\+power\+\_\+down@{init\+\_\+power\+\_\+down}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+power\+\_\+down()}{init\_power\_down()}}
{\footnotesize\ttfamily void init\+\_\+power\+\_\+down (\begin{DoxyParamCaption}\item[{uint32\+\_\+t $\ast$}]{time\+\_\+ms,  }\item[{uint32\+\_\+t}]{debouncing\+\_\+ms }\end{DoxyParamCaption})}



Enter power down mode. 


\begin{DoxyParams}{Parameters}
{\em time\+\_\+ms} & pointer to a variable to save the last instant you entered power down. \\
\hline
{\em debouncing\+\_\+ms} & delay to power down. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
turn off brown-\/out \mbox{\Hypertarget{i2c-rain_8h_a88533ad02465ce52d4e6de7b2095ec32}\label{i2c-rain_8h_a88533ad02465ce52d4e6de7b2095ec32}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+rtc@{init\+\_\+rtc}}
\index{init\+\_\+rtc@{init\+\_\+rtc}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+rtc()}{init\_rtc()}}
{\footnotesize\ttfamily void init\+\_\+rtc (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init R\+TC module. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_ad7577ba7f06f417a019b69da8682ede5}\label{i2c-rain_8h_ad7577ba7f06f417a019b69da8682ede5}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+sensors@{init\+\_\+sensors}}
\index{init\+\_\+sensors@{init\+\_\+sensors}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+sensors()}{init\_sensors()}}
{\footnotesize\ttfamily void init\+\_\+sensors (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Create and setup sensors. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a4454f968b2402a0e61deb15ab2571dab}\label{i2c-rain_8h_a4454f968b2402a0e61deb15ab2571dab}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+spi@{init\+\_\+spi}}
\index{init\+\_\+spi@{init\+\_\+spi}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+spi()}{init\_spi()}}
{\footnotesize\ttfamily void init\+\_\+spi (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init S\+PI library. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a348d23d5899ce59d18975284dfb0afc0}\label{i2c-rain_8h_a348d23d5899ce59d18975284dfb0afc0}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+system@{init\+\_\+system}}
\index{init\+\_\+system@{init\+\_\+system}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+system()}{init\_system()}}
{\footnotesize\ttfamily void init\+\_\+system (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init system. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
main loop state \mbox{\Hypertarget{i2c-rain_8h_a2aae2290a141fddcea3fb6009acbb445}\label{i2c-rain_8h_a2aae2290a141fddcea3fb6009acbb445}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+tasks@{init\+\_\+tasks}}
\index{init\+\_\+tasks@{init\+\_\+tasks}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+tasks()}{init\_tasks()}}
{\footnotesize\ttfamily void init\+\_\+tasks (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init tasks variable and state. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
no tasks ready

reset tipping bucket debounce value \mbox{\Hypertarget{i2c-rain_8h_a980e73df66b14b1190bc25da430a4f12}\label{i2c-rain_8h_a980e73df66b14b1190bc25da430a4f12}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+wdt@{init\+\_\+wdt}}
\index{init\+\_\+wdt@{init\+\_\+wdt}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+wdt()}{init\_wdt()}}
{\footnotesize\ttfamily void init\+\_\+wdt (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{wdt\+\_\+timer }\end{DoxyParamCaption})}



Init watchdog. 


\begin{DoxyParams}{Parameters}
{\em wdt\+\_\+timer} & a time value for init watchdog (W\+D\+T\+O\+\_\+xxxx). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a7c21452937863fa02a29654247eef09b}\label{i2c-rain_8h_a7c21452937863fa02a29654247eef09b}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!init\+\_\+wire@{init\+\_\+wire}}
\index{init\+\_\+wire@{init\+\_\+wire}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{init\+\_\+wire()}{init\_wire()}}
{\footnotesize\ttfamily void init\+\_\+wire (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init wire (i2c) library and performs checks on the bus. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
clear the I2C bus first before calling Wire.\+begin()

wait for watchdog reboot \mbox{\Hypertarget{i2c-rain_8h_a1be652e7d942160a14a560e0be837358}\label{i2c-rain_8h_a1be652e7d942160a14a560e0be837358}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!load\+\_\+configuration@{load\+\_\+configuration}}
\index{load\+\_\+configuration@{load\+\_\+configuration}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{load\+\_\+configuration()}{load\_configuration()}}
{\footnotesize\ttfamily void load\+\_\+configuration (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Load configuration from E\+E\+P\+R\+OM. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
read configuration from eeprom

set configuration value to writable register \mbox{\Hypertarget{i2c-rain_8h_ab08b9047f47849f399950705e769be2e}\label{i2c-rain_8h_ab08b9047f47849f399950705e769be2e}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!print\+\_\+configuration@{print\+\_\+configuration}}
\index{print\+\_\+configuration@{print\+\_\+configuration}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{print\+\_\+configuration()}{print\_configuration()}}
{\footnotesize\ttfamily void print\+\_\+configuration (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Print current configuration. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a717429168fb5542a7b36a94712f7c67e}\label{i2c-rain_8h_a717429168fb5542a7b36a94712f7c67e}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!reset\+\_\+buffers@{reset\+\_\+buffers}}
\index{reset\+\_\+buffers@{reset\+\_\+buffers}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{reset\+\_\+buffers()}{reset\_buffers()}}
{\footnotesize\ttfamily void reset\+\_\+buffers (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Reset buffers to default value. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c-rain_8h_a8801fa7c9f323c5b8b9b2bb5b1c438ff}\label{i2c-rain_8h_a8801fa7c9f323c5b8b9b2bb5b1c438ff}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!save\+\_\+configuration@{save\+\_\+configuration}}
\index{save\+\_\+configuration@{save\+\_\+configuration}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{save\+\_\+configuration()}{save\_configuration()}}
{\footnotesize\ttfamily void save\+\_\+configuration (\begin{DoxyParamCaption}\item[{bool}]{is\+\_\+default }\end{DoxyParamCaption})}



Save configuration to E\+E\+P\+R\+OM. 


\begin{DoxyParams}{Parameters}
{\em is\+\_\+default} & if true save default configuration; if false save current configuration. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
write configuration to eeprom \mbox{\Hypertarget{i2c-rain_8h_a7fcfeb4fd75663ddccc79030c37d68b9}\label{i2c-rain_8h_a7fcfeb4fd75663ddccc79030c37d68b9}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler@{tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler}}
\index{tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler@{tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler()}{tipping\_bucket\_interrupt\_handler()}}
{\footnotesize\ttfamily void tipping\+\_\+bucket\+\_\+interrupt\+\_\+handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Tipping bucket interrupt handler. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
reading T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+P\+IN value to be sure the interrupt has occurred

enable Tipping bucket task \mbox{\Hypertarget{i2c-rain_8h_a8fcd3e091d63c9caff82b8bc3398c279}\label{i2c-rain_8h_a8fcd3e091d63c9caff82b8bc3398c279}} 
\index{i2c-\/rain.\+h@{i2c-\/rain.\+h}!tipping\+\_\+bucket\+\_\+task@{tipping\+\_\+bucket\+\_\+task}}
\index{tipping\+\_\+bucket\+\_\+task@{tipping\+\_\+bucket\+\_\+task}!i2c-\/rain.\+h@{i2c-\/rain.\+h}}
\subsubsection{\texorpdfstring{tipping\+\_\+bucket\+\_\+task()}{tipping\_bucket\_task()}}
{\footnotesize\ttfamily void tipping\+\_\+bucket\+\_\+task (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Tipping bucket task. 

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}
check if last tipping bucket event has happened for more than D\+E\+B\+O\+U\+N\+C\+I\+N\+G\+\_\+\+T\+I\+P\+P\+I\+N\+G\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+T\+I\+M\+E\+\_\+\+MS ms

increment rain tips if oneshot mode is on and oneshot start command It has been received 